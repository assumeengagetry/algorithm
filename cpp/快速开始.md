# 稀疏矩阵实现 - 项目总览

## 📋 项目简介

本项目实现了两种经典的稀疏矩阵存储结构：
1. **三元组顺序表**（数组实现）- 适合静态矩阵和转置操作
2. **十字链表**（广义表实现）- 适合动态矩阵和矩阵运算

## 🚀 快速开始

### 方法1：使用Makefile（推荐）
```bash
make              # 编译程序
make run          # 编译并运行
make test         # 运行自动化测试
make clean        # 清理生成文件
```

### 方法2：直接编译
```bash
g++ -o sparse_matrix sparse_matrix.cpp -std=c++11
./sparse_matrix
```

### 方法3：运行测试脚本
```bash
chmod +x test.sh
./test.sh
```

## 📁 文件说明

```
项目文件结构：
├── sparse_matrix.cpp      # 主程序源代码（核心实现）
├── sparse_matrix          # 编译后的可执行文件
├── README.md             # 详细文档
├── VISUAL_GUIDE.md       # 算法图解
├── EXAMPLES.md           # 使用示例和扩展功能
├── Makefile              # 编译配置
├── test.sh               # 自动化测试脚本
└── test_input.txt        # 测试数据
```

## 💡 核心功能

### 1. 三元组顺序表
- ✅ 创建稀疏矩阵
- ✅ 快速转置（O(m+n) 时间复杂度）
- ✅ 普通转置（用于对比）
- ✅ 打印三元组表和完整矩阵

### 2. 十字链表
- ✅ 创建稀疏矩阵
- ✅ 插入元素
- ✅ 访问元素
- ✅ 按行/列遍历
- ✅ 打印链表结构和完整矩阵

## 📊 测试数据

### 示例矩阵（5×6）
```
原矩阵:
   0   2   0   0   3   0
   0   0   4   0   0   0
   5   0   0   6   0   0
   0   7   0   0   0   8
   0   0   0   9   0   0

三元组表示（8个非零元素）:
(0,1,2) (0,4,3) (1,2,4) (2,0,5)
(2,3,6) (3,1,7) (3,5,8) (4,3,9)
```

### 输入格式
```
行号 列号 值
0 1 2
0 4 3
1 2 4
...
```

## 🎯 核心算法

### 快速转置算法
```
时间复杂度: O(m + n)
空间复杂度: O(m + n)

步骤:
1. 统计每列非零元素个数 → num[]
2. 计算每列起始位置 → cpot[]
3. 依次转置每个元素到正确位置
```

### 十字链表插入
```
时间复杂度: O(k)  k为行/列平均长度
空间复杂度: O(1)

步骤:
1. 创建新节点
2. 插入到行链表（维护right指针）
3. 插入到列链表（维护down指针）
```

## 📈 性能对比

| 操作 | 三元组 | 十字链表 | 说明 |
|------|--------|----------|------|
| 创建 | O(m log m) | O(m·k) | 三元组需排序 |
| 转置 | **O(m+n)** | O(m) | 三元组更快 |
| 访问 | O(m) | O(k) | 十字链表更快 |
| 插入 | O(m) | **O(k)** | 十字链表更快 |
| 空间 | **较小** | 较大 | 三元组更省 |

## 🔧 使用建议

### 选择三元组顺序表：
- ✓ 矩阵相对稳定，很少修改
- ✓ 需要频繁进行转置操作
- ✓ 内存受限的环境
- ✓ 按行序依次访问

### 选择十字链表：
- ✓ 需要频繁插入删除元素
- ✓ 需要进行矩阵运算
- ✓ 需要同时按行和列遍历
- ✓ 对灵活性要求高

## 📚 学习路径

1. **初级**：理解数据结构
   - 阅读 `README.md`
   - 查看 `VISUAL_GUIDE.md` 中的图解
   - 运行程序观察输出

2. **中级**：掌握算法实现
   - 研究 `sparse_matrix.cpp` 源代码
   - 理解快速转置算法原理
   - 理解十字链表的双向链接

3. **高级**：扩展应用
   - 参考 `EXAMPLES.md` 实现扩展功能
   - 实现矩阵加法、乘法
   - 应用到实际问题中

## 🌟 代码亮点

### 1. 快速转置算法
```cpp
TripleMatrix fastTranspose() {
    // 使用辅助数组快速定位
    int num[MAXSIZE] = {0};   // 每列元素个数
    int cpot[MAXSIZE] = {0};  // 每列起始位置
    
    // O(m) 统计
    for (int i = 0; i < nums; i++)
        num[data[i].col]++;
    
    // O(n) 计算位置
    cpot[0] = 0;
    for (int col = 1; col < cols; col++)
        cpot[col] = cpot[col-1] + num[col-1];
    
    // O(m) 转置
    for (int i = 0; i < nums; i++) {
        int pos = cpot[data[i].col]++;
        T.data[pos] = {data[i].col, data[i].row, data[i].value};
    }
}
```

### 2. 十字链表插入
```cpp
void insertElement(int r, int c, int v) {
    CrossNode *newNode = new CrossNode(r, c, v);
    
    // 插入行链表 - 保持列号递增
    if (!rowHead[r] || rowHead[r]->col > c) {
        newNode->right = rowHead[r];
        rowHead[r] = newNode;
    } else {
        CrossNode *p = rowHead[r];
        while (p->right && p->right->col < c)
            p = p->right;
        newNode->right = p->right;
        p->right = newNode;
    }
    
    // 插入列链表 - 保持行号递增
    // ... 类似逻辑
}
```

## 🐛 常见问题

### Q: 编译时出现错误？
```bash
# 确保使用C++11标准
g++ -o sparse_matrix sparse_matrix.cpp -std=c++11

# 检查编译器版本
g++ --version  # 建议使用 g++ 5.0 以上
```

### Q: 输入数据格式错误？
```
正确格式：行号 列号 值（用空格分隔）
0 1 2
0 4 3

错误格式：
(0,1,2)  # 不要使用括号
0,1,2    # 不要使用逗号
```

### Q: 如何保存输出结果？
```bash
./sparse_matrix > output.txt     # 保存完整输出
./sparse_matrix | tee output.txt # 同时显示和保存
```

## 📝 测试用例

### 测试1：基本功能
```
矩阵: 5×6，8个非零元素
预期: 正确创建、转置、打印
```

### 测试2：边界情况
```
- 空矩阵（0个非零元素）
- 单元素矩阵
- 全零行/列
- 稀疏度 > 99%
```

### 测试3：性能测试
```
矩阵: 1000×1000，1000个非零元素
比较: 快速转置 vs 普通转置
```

## 🎓 扩展建议

1. **矩阵运算**
   - 实现矩阵加法
   - 实现矩阵乘法
   - 实现矩阵求逆

2. **文件操作**
   - 从文件读取矩阵
   - 保存矩阵到文件
   - 支持多种格式

3. **性能优化**
   - 多线程并行化
   - SIMD向量化
   - GPU加速

4. **实际应用**
   - 图像处理
   - 网络分析
   - 推荐系统
   - 科学计算

## 📞 技术支持

如有问题，请参考：
1. `README.md` - 详细文档
2. `VISUAL_GUIDE.md` - 算法图解
3. `EXAMPLES.md` - 使用示例

## 📄 许可证

本项目仅供学习和研究使用。

---

## 🎉 开始使用

```bash
# 1. 编译
make

# 2. 运行测试
make test

# 3. 查看帮助
make help
```

祝你学习愉快！🚀
